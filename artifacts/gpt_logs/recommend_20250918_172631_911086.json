{
  "system_prompt": "You are a senior growth analyst optimizing mobile game UA. Your task is to classify campaigns into: Scale, Maintain, Reduce, Cut, and suggest an optional budget delta. You will receive raw campaign data with mixed data types. First, identify which columns contain numeric data (like cost, revenue, installs, ROAS, retention rates) and which are categorical (like game, platform, channel, country). Parse currency strings like '$78.00', '$-', and percentage strings like '31%' to numeric values. Calculate ROAS from cost/revenue data if ROAS columns are missing. Always be concise and actionable. IMPORTANT: You MUST provide recommendations for ALL campaigns in the data. Do not skip any campaigns - analyze each one and provide an action.",
  "user_prompt": "Decide actions for the campaigns below. Return STRICT JSON only, schema:\n{\n  \"recommendations\": [\n    {\n      \"row_index\": int,\n      \"action\": one of [\"Scale\", \"Maintain\", \"Reduce\", \"Cut\"],\n      \"rationale\": short, <= 20 words,\n      \"budget_change_pct\": number between -100 and 200 (optional)\n    }\n  ]\n}\n\nGuidelines: Favor Scale when ROAS >= 1.5 with narrow uncertainty; Maintain when near 1.0 and stable; Reduce when < 1.0 but promising; Cut when clearly unprofitable or highly uncertain.\n\nData parsing rules:\n- Currency strings: '$78.00' \u2192 78.0, '$-' \u2192 0.0, '$0.00' \u2192 0.0\n- Percentage strings: '31%' \u2192 0.31, '0%' \u2192 0.0\n- Numeric strings: '77' \u2192 77, '0' \u2192 0\n- Calculate ROAS = revenue / cost when ROAS columns are missing\n\nCRITICAL: You must analyze EVERY campaign and provide a recommendation. If cost = 0.0 (no spend), classify as 'Cut'. If revenue = 0.0, be conservative.\n\nDataset summary: {\"num_rows\": 5, \"columns\": [\"game\", \"channel\", \"platform\", \"country\", \"date\", \"installs\", \"cost\", \"ad_revenue\", \"revenue\", \"roas_d0\", \"roas_d1\", \"roas_d3\", \"roas_d7\", \"roas_d14\", \"roas_d30\", \"roas_d60\", \"roas_d90\"], \"has_roas_cols\": false, \"has_cost\": true, \"has_revenue\": true, \"total_cost\": 265.0}\n\nCampaign slice (max 200 rows, prioritized by spend): [{\"game\": \"Your Game Name\", \"channel\": \"Unity Ads\", \"platform\": \"Android\", \"country\": \"United States\", \"date\": \"2025-01-01\", \"installs\": \"100\", \"cost\": \"50.0\", \"ad_revenue\": \"25.0\", \"revenue\": \"30.0\", \"roas_d0\": \"0.6\", \"roas_d1\": \"0.7\", \"roas_d3\": \"0.8\", \"roas_d7\": \"0.9\", \"roas_d14\": \"1.0\", \"roas_d30\": \"1.2\", \"roas_d60\": \"1.4\", \"roas_d90\": \"1.6\"}, {\"game\": \"Your Game Name\", \"channel\": \"Unity Ads\", \"platform\": \"iOS\", \"country\": \"United States\", \"date\": \"2025-01-01\", \"installs\": \"120\", \"cost\": \"60.0\", \"ad_revenue\": \"30.0\", \"revenue\": \"36.0\", \"roas_d0\": \"0.6\", \"roas_d1\": \"0.7\", \"roas_d3\": \"0.8\", \"roas_d7\": \"0.9\", \"roas_d14\": \"1.0\", \"roas_d30\": \"1.2\", \"roas_d60\": \"1.4\", \"roas_d90\": \"1.6\"}, {\"game\": \"Your Game Name\", \"channel\": \"Mistplay\", \"platform\": \"Android\", \"country\": \"United States\", \"date\": \"2025-01-01\", \"installs\": \"150\", \"cost\": \"75.0\", \"ad_revenue\": \"37.5\", \"revenue\": \"45.0\", \"roas_d0\": \"0.6\", \"roas_d1\": \"0.7\", \"roas_d3\": \"0.8\", \"roas_d7\": \"0.9\", \"roas_d14\": \"1.0\", \"roas_d30\": \"1.2\", \"roas_d60\": \"1.4\", \"roas_d90\": \"1.6\"}, {\"game\": \"Your Game Name\", \"channel\": \"Mistplay\", \"platform\": \"iOS\", \"country\": \"United States\", \"date\": \"2025-01-01\", \"installs\": \"80\", \"cost\": \"40.0\", \"ad_revenue\": \"20.0\", \"revenue\": \"24.0\", \"roas_d0\": \"0.6\", \"roas_d1\": \"0.7\", \"roas_d3\": \"0.8\", \"roas_d7\": \"0.9\", \"roas_d14\": \"1.0\", \"roas_d30\": \"1.2\", \"roas_d60\": \"1.4\", \"roas_d90\": \"1.6\"}, {\"game\": \"Your Game Name\", \"channel\": \"Facebook Ads\", \"platform\": \"Android\", \"country\": \"Canada\", \"date\": \"2025-01-01\", \"installs\": \"80\", \"cost\": \"40.0\", \"ad_revenue\": \"20.0\", \"revenue\": \"24.0\", \"roas_d0\": \"0.6\", \"roas_d1\": \"0.7\", \"roas_d3\": \"0.8\", \"roas_d7\": \"0.9\", \"roas_d14\": \"1.0\", \"roas_d30\": \"1.2\", \"roas_d60\": \"1.4\", \"roas_d90\": \"1.6\"}]",
  "save_raw": true,
  "response_preview": "{\n    \"recommendations\": [\n        {\n            \"row_index\": 0,\n            \"action\": \"Scale\",\n            \"rationale\": \"ROAS consistently above 1.5\",\n            \"budget_change_pct\": 50\n        },\n        {\n            \"row_index\": 1,\n            \"action\": \"Scale\",\n            \"rationale\": \"ROAS consistently above 1.5\",\n            \"budget_change_pct\": 50\n        },\n        {\n            \"row_index\": 2,\n            \"action\": \"Scale\",\n            \"rationale\": \"ROAS consistently above 1.5\",\n            \"budget_change_pct\": 50\n        },\n        {\n            \"row_index\": 3,\n            \"action\": \"Scale\",\n            \"rationale\": \"ROAS consistently above 1.5\",\n            \"budget_change_pct\": 50\n        },\n        {\n            \"row_index\": 4,\n            \"action\": \"Maintain\",\n            \"rationale\": \"ROAS stable around 1.0\"\n        }\n    ]\n}"
}